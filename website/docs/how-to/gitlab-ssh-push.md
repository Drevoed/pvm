---
id: gitlab-ssh-push
title: Пуш из гитлаба через ssh
---

По умолчанию pvm публикует изменения через платформу, в нашем случае через gitlab, используя его API.
Но данный подход может не подойти если в релизном коммите приходится доставлять изменений больше, чем настроенные лимиты гитлаба, по умолчанию равные одному мегабайту.
Такое может случится при коммите больших ченжлогов, например.

Ок, допустим вы хотите перейти на push через git протокол или сразу настроить проект на такую схему работы, что благоразумно в долгосрочной перспективе.
Для этого:
1. Создайте публичные и приватные ключи следуя [инструкции](https://gitlab.com/help/ssh/README)
2. Добавьте сгенерированный ключ на странице Settings -> CI / CD проекта.
   Замечание: ключ хоть и добавляется на странице конкретного проекта, он будет доступен и для других проектов в пространстве.
3. Активируйте добавленный ключ для нужных вам проектов. Не забудьте проставить опцию `"Write access allowed"`.
4. Добавьте переменную окружения `GIT_SSH_PRIV_KEY` на странице Settings -> CI / CD проекта со значением равным приватному ключу добавленному на втором шаге.
   Переменную можно пометить как `"protected"`, т.к. нужна она будет только для команды `pvm update`/`pvm release` которые обычно выполняются в master/main ветке проекта.
5. В конфиге pvm проекта проставьте опцию `update.commit_via_platform` в `false`.

После этого PVM будет использовать этот ключ для отправки изменений через git протокол.
