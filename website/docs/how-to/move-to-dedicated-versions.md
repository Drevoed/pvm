---
id: move-to-dedicated-versions
title: Переход на выделенное версионирование
---

Как перейти на [выделенное версионирование](../book/versioning/version-placeholders.md).
Тут зависит от того, где мы будем хранить версии, в тегах или файле.

### Версионирование через тег

Такой способ рекомендуется если у вас сквозное версионирование на весь репозиторий.

:::caution
Такой подход рекомендуется использовать только при использовании одного тега.
Множественные теги не бесплатны и могут сильно засорять вывод в пайплайнах.
:::

#### 1. Выставляем нужные настройки

```toml
[versioning]
source = 'tag'
```

#### 2. Обновим все версии пакетов

Нам нужна [версия-заглушка](../book/versioning/version-placeholders.md#публикация).

```bash
yarn pvm set-versions 0.0.0-stub -u
```

Опция `-u` обновит также зависимости.

#### 3. Создадим версию через тег:

**Опционально.** Если релизных тегов не было, или текущая версия не устраивает можно создать необходимую версию на master-ветке:

```bash
git tag v1.0.0 && git push --tags
```

<hr/>

Готово! Можно пушить все изменения в репозиторий.

### Версионирование через файл

Такой способ рекомендуется при использовании гибридного или полностью независимого версионирования.

В данном случае все версии будут храниться в файле `versions.json`.
Алгоритм схож с предыдущим.


#### 1. Редактируем настройки pvm

```toml
[versioning]
source = 'file'
# source_file = 'versions.json'
```

#### 2. Переносим версии в файл

С новыми настройками pvm уже будет пытаться брать версии из файла `versions.json`, но его у нас еще нет, поэтому давайте создадим его:

```bash
yarn pvm lint --fix
```

Эта команда сделает две вещи:

1. Перенесет версии из пакетов в файл `versions.json` (куда именно переносить настраивается в конфиге pvm)
2. Установит всем пакетам [версии заглушки](../book/versioning/version-placeholders.md#публикация).

В принципе делать это не обязательно: при релизе, команда `update` сама это сделает в релизном коммите,
но выполнив операции вручную, вы будете наглядно видеть изменения, которые произойдут с проектом.

<hr/>

Готово! Можно пушить все изменения в репозиторий.






